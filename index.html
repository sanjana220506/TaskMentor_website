<!DOCTYPE html>
<html>
<head>
<title>Task Mentor</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{
background:linear-gradient(135deg,#000428,#004e92);
min-height:100vh;
display:flex;
justify-content:center;
align-items:center;
color:white;
}
.app{
width:390px;
background:rgba(255,255,255,0.1);
backdrop-filter:blur(20px);
border-radius:30px;
padding:20px;
box-shadow:0 0 40px rgba(0,0,0,.6);
}
h1{text-align:center;}
.nav{
display:flex;
justify-content:space-around;
margin:10px 0;
}
.nav button{
flex:1;
margin:3px;
padding:10px;
border:none;
border-radius:12px;
background:#1c2a3a;
color:white;
}
.nav button.active{background:#00f2fe;color:black;}

.page{display:none;}
.page.active{display:block;}

input,select,button{
width:100%;
padding:12px;
margin:6px 0;
border:none;
border-radius:12px;
background:#1c2a3a;
color:white;
}

button.main{
background:linear-gradient(to right,#00f2fe,#4facfe);
color:black;
font-weight:bold;
}

ul{list-style:none;max-height:220px;overflow-y:auto;}
li{
background:#1c2a3a;
padding:10px;
border-radius:12px;
margin:6px 0;
display:flex;
justify-content:space-between;
align-items:center;
}
li.done{background:#00c896;color:black;text-decoration:line-through;}

.timer{
font-size:40px;
text-align:center;
margin:20px 0;
}

.progress{
width:100%;
height:12px;
background:#1c2a3a;
border-radius:10px;
overflow:hidden;
}
.bar{
height:100%;
background:linear-gradient(to right,#00f2fe,#4facfe);
width:0%;
}

.streak{text-align:center;margin-top:10px;color:#00f2fe;}
</style>
</head>

<body>

<div class="app">

<h1>ðŸ”¥ Task Mentor</h1>

<div class="nav">
<button onclick="openPage('tasks')" class="active">Tasks</button>
<button onclick="openPage('timer')">Focus</button>
<button onclick="openPage('progress')">Status</button>
</div>

<!-- TASKS PAGE -->
<div id="tasks" class="page active">
<input id="taskInput" placeholder="ðŸ“š What will you study?">
<input id="hourInput" type="number" placeholder="â° Hours">
<button class="main" onclick="addTask()">Add</button>
<ul id="taskList"></ul>
</div>

<!-- TIMER PAGE -->
<div id="timer" class="page">
<div class="timer" id="time">25:00</div>
<button class="main" onclick="startPomodoro()">Start Focus</button>
<button onclick="resetPomodoro()">Reset</button>
</div>

<!-- PROGRESS PAGE -->
<div id="progress" class="page">
<h3>Today's Progress</h3>
<div class="progress"><div class="bar" id="bar"></div></div>
<p id="percent">0%</p>
<p class="streak" id="streak">ðŸ”¥ Streak: 0 days</p>
</div>

</div>

<script>
let tasks=JSON.parse(localStorage.getItem("tasks"))||[];
let streak=Number(localStorage.getItem("streak"))||0;

function openPage(id){
document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
document.getElementById(id).classList.add("active");
document.querySelectorAll(".nav button").forEach(b=>b.classList.remove("active"));
event.target.classList.add("active");
}

function addTask(){
let t=taskInput.value;
let h=hourInput.value;
if(!t||!h) return alert("Fill all fields");
tasks.push({t,h,done:false});
save();
}

function toggle(i){
tasks[i].done=!tasks[i].done;
save();
}

function save(){
localStorage.setItem("tasks",JSON.stringify(tasks));
show();
}

function show(){
taskList.innerHTML="";
let done=0;
tasks.forEach((x,i)=>{
let li=document.createElement("li");
li.className=x.done?"done":"";
li.innerHTML=`${x.t} (${x.h}h) <input type="checkbox" ${x.done?"checked":""} onclick="toggle(${i})">`;
taskList.appendChild(li);
if(x.done) done++;
});
let percent=tasks.length?Math.round(done/tasks.length*100):0;
bar.style.width=percent+"%";
document.getElementById("percent").innerText=percent+"%";

if(percent==100 && tasks.length>0){
let today=new Date().toDateString();
if(localStorage.getItem("last")!=today){
streak++;
localStorage.setItem("streak",streak);
localStorage.setItem("last",today);
}
}
document.getElementById("streak").innerText="ðŸ”¥ Streak: "+streak+" days";
}

show();

/* Pomodoro */
let time=1500,interval;
function startPomodoro(){
if(interval) return;
interval=setInterval(()=>{
time--;
let m=Math.floor(time/60);
let s=time%60;
document.getElementById("time").innerText=`${m}:${s<10?'0'+s:s}`;
if(time==0){
clearInterval(interval);
interval=null;
alert("Break time ðŸ§ ");
time=1500;
}
},1000);
}
function resetPomodoro(){
clearInterval(interval);
interval=null;
time=1500;
document.getElementById("time").innerText="25:00";
}
</script>

</body>
</html>